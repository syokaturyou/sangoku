<div class="container">
 <div class="row">
  <table class="table table-hover table-inverse">
   <thead>
     <% if member_signed_in? %>
    <%= form_with url: search_path, local: true, method: :get do |f| %>
      <%= f.text_field :word %>
      <%= f.select :range, options_for_select([['質問タイトル'],['会員']]) %>
      <%= f.hidden_field :search, :value => "partial_match" %>
      <%= f.submit "検索", class: "btn btn-primary" %>
    <% end %>
    <% end %>
    </thead>

  <!--検索対象モデルが会員の時 -->
    <tbody>
      <% if @range == "会員" %>
      <tr>
      <th>"<%= @oomember %>"の会員検索結果を表示</th>
      </tr>
      <th>会員id</th>
      <th>登録会員名</th>
      <th colspan="2"></th>
      <% @members.each do |member| %>
        <tr>
          <td><%= member.id %></td>
          <td><%= link_to member.name, public_member_path(member) %></td>
        </tr>
      <% end %>
      <%= paginate @members %>
  <% else %>
    <!--検索対象モデルが会員ではない時(= 検索対象モデルが質問タイトルの時) -->
      <tr>
      <th>"<%= @oopost %>"の質問タイトル検索結果を表示</th>
      </tr>
      <th>投稿No</th>
      <th>質問タイトル</th>
      <th>質問者</th>
      <th>更新日時</th>
      <th colspan="2"></th>
      <% @posts.each do |post| %>
        <tr>
          <td><%= post.id %></td>
          <td><%= link_to post.posttitle, public_post_path(post) %></td>
          <td><%= link_to post.member.name, public_member_path(post.member) %></td>
          <td><%= post.updated_at.to_s(:datetime_jp) %></td>
          <% if member_signed_in? %>
          <% if post.member.id == current_member.id %>
           <td><%= link_to '編集する', edit_public_post_path(post), class: 'btn btn-success', data: {"turbolinks"=>false} %></td>
           <td><%= link_to '削除する', public_post_path(post), method: :delete, class: 'btn btn-danger', data: { confirm: "本当に削除しますか？" }%></td>
           <% else %>
           <td></td>
           <td></td>
          <% end %>
        </tr>
        <% end %>
      <% end %>
    </tbody>
    <%= paginate @posts %>
  <% end %>
  </table>
 </div>
</div>