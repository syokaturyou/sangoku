<% breadcrumb :result  %>
<%= breadcrumbs separator: " > " , class: :logo %>
  <div style="word-break: break-all;">
   <% if @range == "会員" %>
    <div class="col-lg-7">
     <%= paginate @members %>
    </div>
    <table class="membertable">
     <b>"<%= @oomember %>"の会員検索結果表示</b>
      <tr bgcolor=#66FFCC>
       <th>会員No</th>
       <th>登録会員</th>
       <th>            </th>
       <th>ステータス</th>
      </tr>
     <% @members.each do |member| %>
      <tr bgcolor=#EEEEEE>
       <td><%= member.id %></td>
       <td>
        <%= link_to attachment_image_tag(member, :profileimage, fallback: "no_image.jpg", size: '60x60'), public_member_path(member), data: {"turbolinks"=>false} %>
        <%= member.name.truncate(25) %>
       </td>
       <td>            </td>
       <td>
        <% if member.is_deleted == true %><font color="gray">退会</font>
         <% elsif member.is_deleted == false %><font color="green">有効</font>
         <% else %>
        <% end %>
       </td>
      </tr>
     <% end %>
     </table>
    <% elsif @range == "ジャンル" %>
     <div class="col-lg-7">
       <% if member_signed_in? %>
        <%= link_to ' 新規質問投稿する', new_public_post_path, class: 'btn btn-success btn-lg', data: {"turbolinks"=>false} %>
       <% end %>
      </div>
     <div class="col-lg-7">
      <%= paginate @posts %>
     </div>
     <table class="informtable">
      <b>"<%= @oogenre %>"のジャンル検索結果表示</b>
      <tr bgcolor=#66FFCC>
       <th>投稿id</th>
       <th>ジャンルid/ジャンル名</th>
       <th>質問者情報</th>
       <th>質問タイトル</th>
       <th>回答数</th>
       <th>回答更新日時</th>
       <th>PV数</th>
       <th></th>
      </tr>
     <% @posts.each do |post| %>
      <tr bgcolor=#EEEEEE>
       <td><%= post.id %></td>
       <td>[<%= post.genre.id %>]/<%= post.genre.name %></td>
       <td>
        <%= link_to attachment_image_tag( post.member, :profileimage, fallback: "no_image.jpg", size: '40x40'), public_member_path(post.member), data: {"turbolinks"=>false} %>
        <%= post.member.name.truncate(25) %>
       </td>
       <td><%= link_to post.posttitle, public_post_path(post) %></td>
       <td><%= post.answers.count %></td>
       <td><%= post.updated_at.to_s(:datetime_jp) %></td>
       <td><%= post.impressions_count %></td>
        <% if member_signed_in? %>
         <% if post.member.id == current_member.id %>
          <td><%= link_to '編集する', edit_public_post_path(post), class: 'btn btn-success', data: {"turbolinks"=>false} %>
              <%= link_to '削除する', public_post_path(post), method: :delete, class: 'btn btn-danger', data: { confirm: "本当に削除しますか？" }%>
          </td>
         <% else %>
          <td><%= "" %></td>
         <% end %>
        <% else %>
         <td><%= "" %></td>
        <% end %>
      </tr>
     <% end %>
     </table>
    <% elsif @range == "質問タイトル" %>
     <div class="col-lg-7">
       <% if member_signed_in? %>
        <%= link_to ' 新規質問投稿する', new_public_post_path, class: 'btn btn-success btn-lg', data: {"turbolinks"=>false} %>
       <% end %>
      </div>
     <div class="col-lg-7">
      <%= paginate @posts %>
     </div>
     <table class="informtable">
      <b>"<%= @oopost %>"の質問タイトル検索結果を表示</b>
      <tr bgcolor=#66FFCC>
       <th>投稿No</th>
       <th>質問タイトル</th>
       <th>質問者</th>
       <th>更新日時</th>
       <th>回答数</th>
       <th>ジャンルid/ジャンル名</th>
       <th>PV数</th>
       <th></th>
      </tr>
     <% @posts.each do |post| %>
      <tr bgcolor=#EEEEEE>
       <td><%= post.id %></td>
       <td><%= link_to post.posttitle, public_post_path(post) %></td>
       <td>
        <%= link_to attachment_image_tag( post.member, :profileimage, fallback: "no_image.jpg", size: '40x40'), public_member_path(post.member), data: {"turbolinks"=>false} %>
        <%= post.member.name.truncate(25) %>
       </td>
       <td><%= post.updated_at.to_s(:datetime_jp) %></td>
       <td><%= post.answers.count %></td>
       <td>[<%= post.genre.id %>]/<%= post.genre.name %></td>
       <td><%= post.impressions_count %></td>
        <% if member_signed_in? %>
         <% if post.member.id == current_member.id %>
          <td><%= link_to '編集する', edit_public_post_path(post), class: 'btn btn-success', data: {"turbolinks"=>false} %>
              <%= link_to '削除する', public_post_path(post), method: :delete, class: 'btn btn-danger', data: { confirm: "本当に削除しますか？" }%>
          </td>
         <% else %>
          <td><%= "" %></td>
         <% end %>
        <% else %>
         <td><%= "" %></td>
        <% end %>
       </tr>
      <% end %>
     </table>
   <% else %>
   <% end %>
  </div>
