<div class="container">
 <div class="row">
  <table class="table table-hover table-inverse">
   <thead>
     <% if member_signed_in? %>
      <%= form_with url: search_path, local: true, method: :get do |f| %>
       <%= f.text_field :word %>
       <%= f.select :range, options_for_select([['質問タイトル'],['会員'],['ジャンル']]) %>
       <%= f.hidden_field :search, :value => "partial_match" %>
       <%= f.submit "検索", class: "btn btn-primary" %>
      <% end %>
    <% end %>
    </thead>
  <!--検索対象モデルが会員の時 -->
    <% if @range == "会員" %>
     <tbody>
      <tr>
      <th>"<%= @oomember %>"の会員検索結果を表示</th>
      </tr>
      <th>会員id</th>
      <th>登録会員名</th>
      <th></th>
      <th colspan="3"></th>
      <% @members.each do |member| %>
        <tr>
          <td><%= member.id %></td>
          <td><%= link_to member.name, public_member_path(member) %></td>
          <td><%= attachment_image_tag member, :profileimage, :fill, 60, 60, fallback: "no_image.jpg" %></td>
        </tr>
      <% end %>
      <%= paginate @members %>
     </tbody>
   <!--検索対象モデルがジャンルの時 -->
   <% elsif @range == "ジャンル" %>
     <tbody>
      <tr>
      <th>"<%= @oogenre %>"のジャンル検索結果を表示</th>
      </tr>
      <th>ジャンル名</th>
      <th>ジャンルid</th>
      <th>該当ジャンル質問数</th>
      <th colspan="3"></th>
      <% @genre.posts.each do |post| %>
        <tr>
         <td><%= genre.name %></td>
         <td><%= genre.id %></td>
         <td><%= genre.posts.count %></td>
         <td><%= genre.posts.posttitle %></td>
        </tr>
      <% end %>
      <%= paginate @genres %>
     </tbody>
  <% else %>
    <!--検索対象モデルが会員ではない時(= 検索対象モデルが質問タイトルの時) -->
     <tbody>
      <tr>
       <th>"<%= @oopost %>"の質問タイトル検索結果を表示</th>
      </tr>
       <th>投稿No</th>
       <th>質問タイトル</th>
       <th>質問者</th>
       <th>更新日時</th>
       <th>回答数</th>
       <th>ジャンル名</th>
       <th colspan="4"></th>
      <% @posts.each do |post| %>
      <tr>
       <td><%= post.id %></td>
       <td><%= link_to post.posttitle, public_post_path(post) %></td>
       <td>
         <%= link_to post.member.name, public_member_path(post.member) %>
         <%= attachment_image_tag post.member, :profileimage, :fill, 40, 40, fallback: "no_image.jpg" %>
       </td>
       <td><%= post.updated_at.to_s(:datetime_jp) %></td>
       <td><%= post.answers.count %></td>
       <td><%= post.genre.name %></td>
        <% if member_signed_in? %>
         <% if post.member.id == current_member.id %>
          <td><%= link_to '編集する', edit_public_post_path(post), class: 'btn btn-success', data: {"turbolinks"=>false} %></td>
          <td><%= link_to '削除する', public_post_path(post), method: :delete, class: 'btn btn-danger', data: { confirm: "本当に削除しますか？" }%></td>
         <% else %>
          <td></td>
          <td></td>
         <% end %>
        <% end %>
       </tr>
       <% end %>
     </tbody>
    <%= paginate @posts %>
  <% end %>
  </table>
 </div>
</div>